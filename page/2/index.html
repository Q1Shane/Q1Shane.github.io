<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Shane 's Blog</title><meta name="author" content="Shane"><meta name="copyright" content="Shane"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta property="og:type" content="website">
<meta property="og:title" content="Shane &#39;s Blog">
<meta property="og:url" content="https://hexo.ml/page/2/index.html">
<meta property="og:site_name" content="Shane &#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.ibb.co/Qnww6rp/20210209231648.jpg">
<meta property="article:author" content="Shane">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.ibb.co/Qnww6rp/20210209231648.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121000054.png"><link rel="canonical" href="https://hexo.ml/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"本文修改于","messageNext":"天前，如果本文有一定的时效性，那么本文可能已经失效~"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":10,"languages":{"author":"作者: Shane","link":"链接: ","source":"来源: Shane 's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2025-01-23 22:03:37'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><link rel="stylesheet" href="/css/hexo.min.css"><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Shane 's Blog" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://i.ibb.co/Qnww6rp/20210209231648.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(https://i.ibb.co/xG7jGwW/7.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Shane 's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Shane 's Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/6552.html" title="机器学习(3)——数据压缩">     <img class="post_bg" data-lazy-src="https://i.ibb.co/QJ1fDJM/9.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="机器学习(3)——数据压缩"></a></div><div class="recent-post-info"><a class="article-title" href="/6552.html" title="机器学习(3)——数据压缩">机器学习(3)——数据压缩</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-11-02T14:56:08.000Z" title="发表于 2021-11-02 22:56:08">2021-11-02</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-11-02T14:56:08.000Z" title="更新于 2021-11-02 22:56:08">2021-11-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></span></div><div class="content">数据压缩PCA主成分分析（Principal Component Analysis, PCA） 也称为 卡尔胡宁-勒夫变换（Karhunen-Loeve Transform），是一种用于探索高维数据结构的技术。PCA 通常用于高维数据集的探索与可视化；还可以用于数据压缩，数据预处理等。PCA 可以把可能具有相关性的高维变量合成线性无关的低维变量，称为主成分（ principal components）。新的低维数据集会尽可能的保留原始数据的变量。
作用：可以削减回归分析或者聚类分析中特征的数量，特征数量达到上百的时候，开始使用PCA


如图所示，第四张二维的平面图，最能体现出其三维的特性，因此，我们可以使用PCA，将三维的数据，转换为二维的数据，虽然会损失一部分信息，但不影响我们对特征的提取与预测。


直观就是，所有点到线的垂直距离和最短的一条线。也确定了每个点在新的维度上的特征值


(业界常使用90%～95%)
12345678910111213141516171819from sklearn.decomposition import PCAdef pca():    &quo ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/11448.html" title="机器学习(2)——归一化与标准化">     <img class="post_bg" data-lazy-src="https://i.ibb.co/m0D7nYq/image.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="机器学习(2)——归一化与标准化"></a></div><div class="recent-post-info"><a class="article-title" href="/11448.html" title="机器学习(2)——归一化与标准化">机器学习(2)——归一化与标准化</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-11-02T12:16:42.000Z" title="发表于 2021-11-02 20:16:42">2021-11-02</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-11-02T13:16:42.000Z" title="更新于 2021-11-02 21:16:42">2021-11-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></span></div><div class="content">特征处理归一化Normalization由于每一组特征数据的量纲是不同的，我们需要先将他们的量纲统一，之后再去训练学习，每一组特征数据的变化对预测结果的影响。
特点:通过对原始数据进行变换把数据映射到(默认为[0,1])之间


def MinMaxScaler(feature_range=(0, 1…))：归一化。每个特征缩放到给定范围(默认[0,1])
1234567891011121314151617181920212223242526from sklearn.preprocessing import MinMaxScaler, StandardScalerdef mm():    &quot;&quot;&quot;    归一化处理    :return: NOne    &quot;&quot;&quot;    # 归一化容易受极值的影响    mm = MinMaxScaler(feature_range=(0, 1))		    #通过fit_transform进行转换    data = mm.fit_transform([[90, 2, 10, 40], [60, ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/32820.html" title="机器学习(1)——特征工程">     <img class="post_bg" data-lazy-src="https://i.ibb.co/xG7jGwW/7.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="机器学习(1)——特征工程"></a></div><div class="recent-post-info"><a class="article-title" href="/32820.html" title="机器学习(1)——特征工程">机器学习(1)——特征工程</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-11-01T11:02:37.000Z" title="发表于 2021-11-01 19:02:37">2021-11-01</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-11-01T11:02:37.000Z" title="更新于 2021-11-01 19:02:37">2021-11-01</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></span></div><div class="content">机器学习的流程

预处理  ——> 特征工程  ——> 机器学习  ——> 模型评估

如果未达到要求，重新循环
特征工程将原始数据转换为更好地代表预测模型的潜在问题的特征的工程，从而提高了模型对位置数据预测的准确性（ 属于数据预处理阶段的工作）
以scikit-learn为例：
1234567891011121314151617181920212223242526272829from sklearn.feature_extraction import DictVectorizerfrom sklearn.feature_extraction.text import CountVectorizer, TfidfVectorizerfrom sklearn.preprocessing import MinMaxScaler, StandardScalerfrom sklearn.feature_selection import VarianceThresholdfrom sklearn.decomposition import PCAimport jiebaimport numpy as ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/45549.html" title="卷积核（kernels）与滤波器（filters）的关系">     <img class="post_bg" data-lazy-src="https://i.ibb.co/xG7jGwW/7.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="卷积核（kernels）与滤波器（filters）的关系"></a></div><div class="recent-post-info"><a class="article-title" href="/45549.html" title="卷积核（kernels）与滤波器（filters）的关系">卷积核（kernels）与滤波器（filters）的关系</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-05-16T02:14:01.000Z" title="发表于 2021-05-16 10:14:01">2021-05-16</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-05-16T02:14:01.000Z" title="更新于 2021-05-16 10:14:01">2021-05-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E9%BB%98%E8%AE%A4/">默认</a></span></div><div class="content">

简单理解：卷积核：二维的矩阵滤波器：多个卷积核组成的三维矩阵，多出的一维是通道。
先介绍一些术语：layers（层）、channels（通道）、feature maps（特征图），filters（滤波器），kernels（卷积核）。从层次结构的角度来看，层和滤波器的概念处于同一水平，而通道和卷积核在下一级结构中。通道和特征图是同一个事情。一层可以有多个通道（或者说特征图）。如果输入的是一个 RGB 图像，那么就会有 3 个通道。“channel”通常被用来描述 “layer” 的结构。相似的，“kernel”是被用来描述 “filter” 的结构。
filter 和 kernel 之间的不同很微妙。很多时候，它们可以互换，所以这可能造成我们的混淆。
那它们之间的不同在于哪里呢？一个 “Kernel” 更倾向于是 2D 的权重矩阵。而 “filter” 则是指多个 Kernel 堆叠的 3D 结构。如果是一个 2D 的 filter，那么两者就是一样的。但是一个 3Dfilter，在大多数深度学习的卷积中，它是包含 kernel 的。每个卷积核都是独一无二的，主要在于强调输入通道的不 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/59924.html" title="安装Go环境">     <img class="post_bg" data-lazy-src="https://i.ibb.co/QJ1fDJM/9.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="安装Go环境"></a></div><div class="recent-post-info"><a class="article-title" href="/59924.html" title="安装Go环境">安装Go环境</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-05-14T15:30:19.000Z" title="发表于 2021-05-14 23:30:19">2021-05-14</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-05-14T15:30:19.000Z" title="更新于 2021-05-14 23:30:19">2021-05-14</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Go/">Go</a></span></div><div class="content">

安装 Go 语言及搭建 Go 语言开发环境
下载下载地址
Go 官网下载地址：https://golang.org/dl/

Go 官方镜像站（推荐）：https://golang.google.cn/dl/


版本的选择Windows 平台和 Mac 平台推荐下载可执行文件版，Linux 平台下载压缩文件版。
(目前的最新版本可能不是 1.11.5，但是安装过程类似哦。)

Windows 下安装Go环境
此安装实例以 64位Win10系统安装 Go1.11.5可执行文件版本为例。
将上一步选好的安装包下载到本地。

双击下载好的文件，然后再按照下图步骤安装即可。

Linux下安装Go环境
登录 LinuxMac 或 Linux 的用户可以用命令ssh root@xxx.xxx.xxx.xxx登录主机Window 的用户可以使用 SecureCRT 登录主机虚拟机用户直接打开你的虚拟机
安装 Go 环境
Golang 官网下载地址：https://golang.org/dl/


打开官网下载地址选择对应的系统版本, 复制下载链接 这里我选择的是 go1.11.5.linux ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/58735.html" title="论文解读：GPipe">     <img class="post_bg" data-lazy-src="https://i.ibb.co/0nxNtcs/index.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="论文解读：GPipe"></a></div><div class="recent-post-info"><a class="article-title" href="/58735.html" title="论文解读：GPipe">论文解读：GPipe</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-11T07:35:46.000Z" title="发表于 2021-03-11 15:35:46">2021-03-11</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-11T07:35:46.000Z" title="更新于 2021-03-11 15:35:46">2021-03-11</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E8%AE%BA%E6%96%87/">论文</a></span></div><div class="content">

背景：增大模型规模通常是提高模型效果的有效方案，但是更多的模型参数，更复杂的模型计算逻辑，导致模型的训练过程需要更多的内存。同时计算设备 (GPU) 的内存资源往往非常非常有限，单台设备不足以支持超大规模模型的训练，而将模型分布在多台设备上则是一种可能的解决方案。
简介：GPipe 使用模型并行方案，将模型切分成一连串 stage，每个 stage 放在独立的设备（GPU/TPU）上，实现对超大规模模型的支持，同时利用 Pipeline 的方案，提高了模型并行模式下的设备利用率。最终 GPipe 通过更大规模的模型和更大的 batch_size，在图像和 NLP 的模型上都得到更好的模型效果。
方案设计
1. 划分 stage如图 1.(a) 左图所示，将模型划分为连续的几个 stage，每个 stage 各自对应一个设备。这样就使得模型的大小可以突破单个设备内存的大小，因为一台设备只需要能够容纳部分模型的参数和计算。
2. 划分 Micro-Batch 和 Pipeline图 1.(b) 为一般的模型并行的运算模式，在每个时间点只有一台设备在处理计算逻辑，完成计算后将结果发送给下 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/29937.html" title="论文解读：PipeDream">     <img class="post_bg" data-lazy-src="https://i.ibb.co/LnJ3TPp/index.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="论文解读：PipeDream"></a></div><div class="recent-post-info"><a class="article-title" href="/29937.html" title="论文解读：PipeDream">论文解读：PipeDream</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-05T14:39:50.000Z" title="发表于 2021-03-05 22:39:50">2021-03-05</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-05T14:39:50.000Z" title="更新于 2021-03-05 22:39:50">2021-03-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E8%AE%BA%E6%96%87/">论文</a></span></div><div class="content">

本文介绍了微软新提出的 PipeDream，旨在使深度学习网络训练并行化水平更高，进而提高训练效率。
深度神经网络（DNNs：Deep Neural Networks）已经在大量应用中取得了巨大进展，这些应用包括图像分类、翻译、语言建模以及视频字幕等。但 DNN 训练极其耗时，需要多个加速器高效地并行化。
在论文 “ PipeDream: Greneralized Pipeline Parallelism for DNN Training ”（该论文发表于第 27 届 ACM 操作系统原理研讨会： SOSP 2019 ）中，微软系统研究小组的研究员，与来自卡内基梅隆大学和斯坦福大学的同事和学生们一起提出了一种 DNN 并行化训练的新方法。正如论文里在大量模型上展示的那样，这套被称为 PipeDream 的系统比传统的训练方法快了最多 4.3 倍。
DNN 训练是在前向和后向通道计算中迭代进行的。在每轮迭代中，训练过程循环处理输入数据的一个 minibatch，并且更新模型参数。最常见的 DNN 并行化训练方法是一种被称为数据并行化的方法（见下图 1），这种方法把输入数据分散到各个  ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/32873.html" title="anaconda3的使用">     <img class="post_bg" data-lazy-src="https://i.ibb.co/0nxNtcs/index.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="anaconda3的使用"></a></div><div class="recent-post-info"><a class="article-title" href="/32873.html" title="anaconda3的使用">anaconda3的使用</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-04T02:55:55.000Z" title="发表于 2021-03-04 10:55:55">2021-03-04</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-04T02:55:55.000Z" title="更新于 2021-03-04 10:55:55">2021-03-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Anaconda/">Anaconda</a></span></div><div class="content">

1、安装 anaconda3    安装条件
  系统要求：32 位或 64 位系统均可
  下载文件大小：约 500MB
  所需空间大小：3GB 空间大小（Miniconda 仅需 400MB 空间即可）

（1）地址 anaconda 下载。最新版本为 Anaconda3-2020.02-Linux-x86_64.sh，启动终端，输入如下指令：
1bash ~&#x2F;Downloads&#x2F;Anaconda3-2020.02-Linux-x86_64.sh
（2）安装过程中，看到提示 “In order to continue the installation process, please review the license agreement.”（“请浏览许可证协议以便继续安装。”），点击“Enter” 查看 “许可证协议”，也可以点击空格翻页，这样快一些。在“许可证协议” 界面将屏幕滚动至底，输入 “yes” 表示同意许可证协议内容。然后进行下一步。
（3）安装过程中，提示 “Press Enter to accept the default install ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/64862.html" title="Numpy基础用法">     <img class="post_bg" data-lazy-src="https://i.ibb.co/s2pR2LB/58367946742189816.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="Numpy基础用法"></a></div><div class="recent-post-info"><a class="article-title" href="/64862.html" title="Numpy基础用法">Numpy基础用法</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-02-15T13:01:46.000Z" title="发表于 2021-02-15 21:01:46">2021-02-15</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-02-15T13:01:46.000Z" title="更新于 2021-02-15 21:01:46">2021-02-15</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Numpy/">Numpy</a></span></div><div class="content">

 一个由国外大神制作的 NumPy 可视化教程，直观地介绍 NumPy 的各种用法，很容易就能理解。
话不多说，一睹为快。
数组先来介绍最基础的一维数组。
创建数组np.array() 直接创建：

使用 np.ones()、np.zeros() 等方法：

我们在写数组的时候是横着写的，而其实数组是列向量，这样很直观。
数组运算加减乘除


（注意这里的data和ones不是上面的data，ones）

数组乘以数值

数组索引
数组聚合
上面是一维数组，下面介绍二维维数组也就是矩阵的使用技巧。
矩阵创建矩阵直接创建：

使用 np.ones()、np.zeros() 等方法：

这样就很容易理解括号里 (3,2) 的含义。
矩阵运算

矩阵点积矩阵点积跟线性代数基本一样，有些抽象，借助示意图能很好理解：

进一步拆分解释：

矩阵索引
矩阵聚合求最值

按行 / 列聚合

矩阵转置
矩阵重塑reshape() 用法：

mark
高维数组Numpy 不仅可以处理上述的一维数组和二维矩阵，还可以处理任意 N 维的数组，方法也大同小异。
创建多维数组

掌握了以上基础后，我们可以做 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/45623.html" title="毕业设计-日志">     <img class="post_bg" data-lazy-src="https://i.ibb.co/QJ1fDJM/9.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="毕业设计-日志"></a></div><div class="recent-post-info"><a class="article-title" href="/45623.html" title="毕业设计-日志">毕业设计-日志</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack article-meta__icon sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-02-15T04:14:34.000Z" title="发表于 2021-02-15 12:14:34">2021-02-15</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-04T04:14:34.000Z" title="更新于 2021-03-04 12:14:34">2021-03-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%97%A5%E5%BF%97/">日志</a></span></div><div class="content">

2021/3/3
阅读论文： PipeDream: Fast and Effiffifficient Pipeline Parallel DNN Training ，
​                   GPipe: Easy Scaling with Micro-Batch Pipeline Parallelism

学习PyTorch分布式架构的使用


2021/3/2
配置服务器环境，安装anaconda, pytorch, 导入torchgpipe。学习其使用
翻译论文：**torchgpipe: On-the-ﬂy Pipeline Parallelism for Training Giant Models**

2021/2/-2021/2/7
1.查阅分布式深度学习的相关知识
（在对分布式深度学习有一定了解后，再研读论文，有一定的思路。）
‘’它使用同步随机梯度下降和流水线并行的方式进行训练，适用于任何由多个有序的层组成的深度神经网络(Deep Neural Networks, DNN)。 Gpipe通过跨不同的加速器来分割模型，并自动将一小批训练示例划分成更小 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="https://i.ibb.co/Qnww6rp/20210209231648.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Shane</div><div class="author-info__description">一个收藏回忆与分享技术的地方！</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Q1Shane"><i class="fab fa-github"></i><span>Follow Me</span></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/42505.html" title="论文解读：MuCGEC"><img data-lazy-src="https://i.ibb.co/WWjVRYs/12.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="论文解读：MuCGEC"/></a><div class="content"><a class="title" href="/42505.html" title="论文解读：MuCGEC">论文解读：MuCGEC</a><time datetime="2023-05-17T00:11:23.000Z" title="发表于 2023-05-17 08:11:23">2023-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/27590.html" title="机器学习-12-——聚类"><img data-lazy-src="https://i.ibb.co/WWjVRYs/12.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="机器学习-12-——聚类"/></a><div class="content"><a class="title" href="/27590.html" title="机器学习-12-——聚类">机器学习-12-——聚类</a><time datetime="2021-12-10T13:56:08.000Z" title="发表于 2021-12-10 21:56:08">2021-12-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/30190.html" title="机器学习-11-——逻辑回归"><img data-lazy-src="https://i.ibb.co/WWjVRYs/12.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="机器学习-11-——逻辑回归"/></a><div class="content"><a class="title" href="/30190.html" title="机器学习-11-——逻辑回归">机器学习-11-——逻辑回归</a><time datetime="2021-12-09T14:56:08.000Z" title="发表于 2021-12-09 22:56:08">2021-12-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/6552.html" title="机器学习-10-——拟合与正则化"><img data-lazy-src="https://i.ibb.co/zPS3z28/20210103181032.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="机器学习-10-——拟合与正则化"/></a><div class="content"><a class="title" href="/6552.html" title="机器学习-10-——拟合与正则化">机器学习-10-——拟合与正则化</a><time datetime="2021-12-08T14:56:08.000Z" title="发表于 2021-12-08 22:56:08">2021-12-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/6552.html" title="机器学习-9-——线性回归"><img data-lazy-src="https://i.ibb.co/LnJ3TPp/index.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/weilining/img@main/img/20201121001110.png'" alt="机器学习-9-——线性回归"/></a><div class="content"><a class="title" href="/6552.html" title="机器学习-9-——线性回归">机器学习-9-——线性回归</a><time datetime="2021-11-07T14:56:08.000Z" title="发表于 2021-11-07 22:56:08">2021-11-07</time></div></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="card-content"><div class="item-headline"><i class="fas fa-bolt"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Anaconda/"><span class="card-category-list-name">Anaconda</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Go/"><span class="card-category-list-name">Go</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/"><span class="card-category-list-name">Hexo</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Numpy/"><span class="card-category-list-name">Numpy</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%97%A5%E5%BF%97/"><span class="card-category-list-name">日志</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"><span class="card-category-list-name">机器学习</span><span class="card-category-list-count">12</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%AE%BA%E6%96%87/"><span class="card-category-list-name">论文</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E9%BB%98%E8%AE%A4/"><span class="card-category-list-name">默认</span><span class="card-category-list-count">2</span></a></li>
            
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E9%BB%98%E8%AE%A4/" style="font-size: 1.2em; color: rgb(168, 35, 90)">默认</a><a href="/tags/Blog/" style="font-size: 1.1em; color: rgb(183, 132, 16)">Blog</a><a href="/tags/%E6%AF%95%E8%AE%BE/" style="font-size: 1.3em; color: rgb(83, 165, 156)">毕设</a><a href="/tags/Go/" style="font-size: 1.1em; color: rgb(162, 189, 116)">Go</a><a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 1.5em; color: rgb(153, 73, 159)">机器学习</a><a href="/tags/%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/" style="font-size: 1.4em; color: rgb(73, 41, 46)">特征工程</a><a href="/tags/%E6%AC%A0%E6%8B%9F%E5%90%88%E4%B8%8E%E8%BF%87%E6%8B%9F%E5%90%88/" style="font-size: 1.1em; color: rgb(69, 109, 12)">欠拟合与过拟合</a><a href="/tags/L1%E5%92%8CL2%E6%AD%A3%E5%88%99%E5%8C%96/" style="font-size: 1.1em; color: rgb(66, 83, 49)">L1和L2正则化</a><a href="/tags/%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/" style="font-size: 1.1em; color: rgb(20, 99, 82)">逻辑回归</a><a href="/tags/%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/" style="font-size: 1.1em; color: rgb(173, 164, 176)">无监督学习</a><a href="/tags/%E8%81%9A%E7%B1%BB/" style="font-size: 1.1em; color: rgb(21, 104, 53)">聚类</a><a href="/tags/%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87/" style="font-size: 1.1em; color: rgb(105, 188, 100)">评估指标</a><a href="/tags/ROC/" style="font-size: 1.1em; color: rgb(6, 117, 169)">ROC</a><a href="/tags/K%E8%BF%91%E9%82%BB/" style="font-size: 1.1em; color: rgb(131, 28, 46)">K近邻</a><a href="/tags/%E7%BD%91%E6%A0%BC%E6%90%9C%E7%B4%A2/" style="font-size: 1.1em; color: rgb(62, 178, 109)">网格搜索</a><a href="/tags/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95/" style="font-size: 1.2em; color: rgb(110, 88, 107)">分类算法</a><a href="/tags/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF/" style="font-size: 1.1em; color: rgb(144, 182, 173)">朴素贝叶斯</a><a href="/tags/%E5%86%B3%E7%AD%96%E6%A0%91/" style="font-size: 1.1em; color: rgb(58, 155, 72)">决策树</a><a href="/tags/%E5%9B%9E%E5%BD%92%E7%AE%97%E6%B3%95/" style="font-size: 1.1em; color: rgb(97, 95, 10)">回归算法</a><a href="/tags/%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/" style="font-size: 1.1em; color: rgb(4, 163, 182)">线性回归</a><a href="/tags/GEC/" style="font-size: 1.1em; color: rgb(39, 2, 190)">GEC</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">十一月 2021</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">五月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/02/"><span class="card-archive-list-date">二月 2021</span><span class="card-archive-list-count">4</span></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">22</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-12-31T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">30k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-01-23T14:03:37.498Z"></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Shane</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.spacingElementById('content-inner')
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.spacingElementById('content-inner')
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        var from = '出自 ' + data.from
        var sub = "".length == 0 ? new Array() : "".split(',')
        var both = sub.unshift(data.hitokoto, from)
        var typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.17.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<[^>]+>/g,"") // remove html tag
    content = content.replace(/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|gif|png|webp)/g, '') // remove image link
    content = content.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi, '') // remove url

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    
    let defaultIcon = ''
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          let name = 'src'
          if(true) {
            name = 'data-lazy-src'
          }
          result += `<a href='${array[i].url}' class="thumbnail"><img ${name}='${getIcon(array[i].avatar, array[i].mail)}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
      let serverURL = ''
      if (false) {
        serverURL = ''
      } else {
        serverURL = 'https://DLtC6dHf.api.lncldglobal.com'
      }

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'DLtC6dHfP11bGkqkjUFWnD00-MdYXbMMI',
        "X-LC-Key": 'uA7SpdGiCWi0BpIigPRpsHsN',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': e.QQAvatar,
            'content': changeContent(e.comment),
            'mail': e.mail,
            'nick': e.nick,
            'url': e.url,
            'date': e.createdAt,
          }
        })
        saveToLocal.set('leancloud-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('leancloud-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="000PeZCQ1i4XVs" data-server="tencent" data-type="artist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config_change',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', '', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})</script></div><script src="https://cdn.jsdelivr.net/npm/live2d-widget@^3.1.3/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"https://cdn.jsdelivr.net/npm/live2d-widget-model-shizuku/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"react":{"opacity":0.7},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>